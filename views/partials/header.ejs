<link rel="stylesheet" href="/css/custom.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
<header class="shadow-sm bg-white">
  <nav class="container d-flex align-items-center justify-content-between py-3">
    <a href="/" class="fw-bold fs-4 text-decoration-none px-3 py-1 rounded-pill <%= currentPath === '/' ? 'bg-primary text-white' : 'text-body' %>">App Logo</a>
    <ul class="d-none d-md-flex list-unstyled mb-0 gap-3">
      <li>
        <a href="/games" class="text-decoration-none px-3 py-1 rounded-pill <%= currentPath.startsWith('/games') ? 'bg-primary text-white' : 'text-body' %>">Games</a>
      </li>
      <li><a href="/social" class="text-decoration-none px-3 py-1 rounded-pill <%= currentPath.startsWith('/social') ? 'bg-primary text-white' : 'text-body' %>">Social</a></li>
      
    </ul>
    <div class="text-nowrap d-flex align-items-center">
      <% if (loggedInUser) { %>
        <a href="#" id="navInbox" data-unread="<%= hasUnreadMessages ? '1' : '' %>" data-new-followers="<%= hasNewFollowers ? '1' : '' %>" class="me-3 position-relative <%= currentPath.startsWith('/messages') ? 'text-primary' : 'text-body' %>">
          <i class="bi bi-envelope-fill fs-4"></i>
          <% if(hasUnreadMessages || hasNewFollowers){ %>
            <span class="position-absolute top-0 start-100 translate-middle p-1 bg-danger border border-light rounded-circle inbox-dot"></span>
          <% } %>
        </a>
        <% const profileSlug = loggedInUser && (loggedInUser.venmo || loggedInUser.id); %>
        <a href="<%= profileSlug ? `/profile/${profileSlug}/stats` : '/profile' %>" class="me-3 <%= currentPath.startsWith('/profile') ? 'active-profile' : '' %>">
          <img src="<%= navImg %>" alt="Profile" class="nav-profile-icon">
        </a>
        <a href="/logout" class="btn btn-outline-secondary">Log Out</a>
      <% } else { %>
        <a href="/login" class="btn btn-outline-primary me-2">Sign In</a>
        <a href="/signup" class="btn btn-primary">Register</a>
      <% } %>
    </div>
  </nav>
</header>
<div class="modal fade" id="inboxModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content"></div>
  </div>
</div>
<script src="/js/inboxModal.js"></script>
<script>window.loggedInUser = <%- JSON.stringify(loggedInUser || null) %>;</script>
<script>window.hasQueuedGameInvites = <%= JSON.stringify(!!hasQueuedGameInvites) %>;</script>
<script src="/js/nearbyCheckin.js"></script>

<%- include('ratePromptModal') %>
<%- include('gameInviteModal') %>

<script>window.pendingRatings = <%- JSON.stringify(pendingRatings || []) %>;</script>
<script src="/js/pendingRatingModal.js"></script>
<script src="/js/gameInviteModal.js"></script>
